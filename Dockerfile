# 1. БАЗА (FROM): Вибираємо посуд.
# Ми не починаємо з нуля (не вирощуємо пшеницю).
# Ми беремо готовий образ Linux, де вже встановлено Python 3.11.
# "slim" означає "легка версія" (без зайвого сміття).
FROM python:3.11-slim

# 2. РОБОЧЕ МІСЦЕ (WORKDIR): Виділяємо стіл.
# Створюємо папку /app всередині контейнера і заходимо в неї.
# Усе, що ми зробимо далі, буде лежати там.
WORKDIR /app

# 3. ЗАКУПІВЛЯ (COPY + RUN): Спочатку тільки продукти.
# Ми копіюємо ТІЛЬКИ список requirements.txt.
COPY requirements.txt .

# Тепер кухар йде в магазин (pip install).
# Ми робимо це ДО копіювання коду. Чому?
# Щоб якщо ти зміниш одну літеру в коді, Docker не біг в магазин заново.
# Це називається "Кешування шарів".
RUN pip install --no-cache-dir -r requirements.txt

# 4. ЗАВАНТАЖЕННЯ (COPY): Викладаємо інгредієнти на стіл.
# Копіюємо весь інший код (main.py, .env і т.д.) з твого компа в контейнер.
COPY . .

# 5. СТАРТ (CMD): Подаємо страву.
# Яку команду виконати, коли контейнер оживе?
CMD ["python", "main.py"]